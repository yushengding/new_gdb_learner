https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target

create a symbol and an exec only file
O2 symbol work but without O3 would be better
  gcc -g -O2 test.cpp -lstdc++        
  objcopy --only-keep-debug a.out a.out.debug
  objcopy --strip-debug a.out
  ./a.out
  

loading symbols + executable + core:
  gdb -s a.out.debug -e a.out -c core.a.out.*
    Core was generated by `./a.out'.
    Program terminated with signal SIGSEGV, Segmentation fault.
    #0  0x000055bb9900074a in foo () at test.cpp:8
    8         *ptr = 1;
    (gdb) bt
    #0  0x000055bb9900074a in foo () at test.cpp:8
    #1  0x000055bb9900075c in main () at test.cpp:20

loading symbols + core:
  gdb -s a.out.debug -c core.a.out.* 
    Core was generated by `./a.out'.
    Program terminated with signal SIGSEGV, Segmentation fault.
    #0  0x000055bb9900074a in ?? ()
    (gdb) bt
    #0  0x000055bb9900074a in ?? ()
    #1  0x00007fff70afa9d0 in ?? ()
    #2  0x000055bb9900075c in ?? ()
    #3  0x000055bb990007d0 in ?? ()
    #4  0x00007f919610fc87 in ?? ()
    #5  0xffffffffffffff90 in ?? ()
    #6  0x00007fff70afaab8 in ?? ()
    #7  0x00000001ffffff90 in ?? ()
    #8  0x000055bb99000753 in ?? ()
    #9  0x0000000000000000 in ?? ()

loading exec + core:
  gdb -e a.out -c core.a.out.* 
    Core was generated by `./a.out'.
    Program terminated with signal SIGSEGV, Segmentation fault.
    #0  0x000055c119400630 in ?? ()
    (gdb) bt
    #0  0x000055c119400630 in ?? ()
    #1  0x00007fafaea5fc87 in __libc_start_main (main=0x55c119400630, argc=1, 
        argv=0x7fff0d8e3728, init=<optimized out>, fini=<optimized out>, 
        rtld_fini=<optimized out>, stack_end=0x7fff0d8e3718)
        at ../csu/libc-start.c:310
    #2  0x000055c11940069a in ?? ()
    #3  0x00007fff0d8e3718 in ?? ()
    #4  0x000000000000001c in ?? ()
    #5  0x0000000000000001 in ?? ()
    #6  0x00007fff0d8e50a5 in ?? ()
    #7  0x0000000000000000 in ?? ()